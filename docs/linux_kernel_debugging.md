## Linux Kernel Debugging Skills

### General Debugging

Many debugging infrastructures provided by Linux Kernel that can be enabled as necessary based on which subsystem need to debug.

| Kernel Debug Config Options                          | Description                                                  | Default Value                           |
| ---------------------------------------------------- | ------------------------------------------------------------ | --------------------------------------- |
| CONFIG_DEBUG_USER                                    | When a user space process is killed due to a segfault or illegal instruction, a message will be printed out<br /><br />arch/arm/Kconfig.debug | =Y<br />kernel boot param:user_debug=31 |
| CONFIG_FREE_PAGES_RDONLY                             | Enable this options to mark pages as read only to trigger a fault if any code attempt to write to page on the buddy list. This may have a performance impact.<br /><br />arch/arm/Kconfig.debug | =N                                      |
| CONF_ARM_PTDUMP                                      | Show the kernel pagetable layout in a debug file.<br /><br />arch/arm/Kconfig.debug | =N                                      |
| CONFIG_ARM_UNWIND                                    | Enables stack unwinding support in the kernel using the info auto generated by the compiler. Kernel size is slightly bigger but no performance impact.<br /><br />arch/arm/Kconfig.debug | =Y                                      |
| CONFIG_DEBUG_SET_MODULE_RONX                         | Set module data as NX and text as RO which prevents module data execution and code manipulation for safety. However it interferes with dynamic kernel tracing.<br /><br />arch/arm/Kconfig.debug | =Y                                      |
| CONFIG_PAGE_POSITIONING,<br />CONFIG_DEBUG_PAGEALLOC | Fills the pages with posion patterns after free_pages() and verifies the pattern before alloc_pages()<br /><br />mm/Kconfig.debug | =N                                      |
| CONFIG_DEBUG_SPINLOCK,<br />CONFIG_DEBUG_MUTEXS      | To catch bad behavior/violations on spinlock and mutex.<br /><br />lib/Kconfig.debug | =N                                      |
| CONFIG_DEBUG_LOCK_ALLOC                              | Lock debugging - Detect incorrect freeing of live locks<br /><br />/lib/Kconfig.debug | =N                                      |
| CONFIG_DEBUG_ATOMIC_SLEEP                            | Various routines which may sleep become noisy if they are called inside atomic sections.<br /><br />/lib/Kconfig.debug | =N                                      |
| CONFIG_DEBUG_HIGHMEM,<br />CONFIG_DEBUG_VM           | Additional debug options for kernel virtual memory management corruption<br /><br />lib/Kconfig.debug | =N                                      |
| CONFIG_SLUB_DEBUG                                    | Puts additional checks to detect corruption of internal kernel memory allocation structures<br /><br />mm/Kconfig.debug | =Y                                      |
| CONFIG_DYNAMIC_DEBUG                                 | Enable dynamic printk() support<br /><br />lib.Kconfig.debug | =Y                                      |
| CONFIG_DEBUG_KMEMLEAK                                | Enable the memory leak detector to trace memory allocation/freeing in kernel. Enabling this option will introduce overhead to memory allocation.<br /><br />lib/Kconfig.debug | =N                                      |
| CONFIG_FTRACE                                        | Enable the kernel tracing infrastructure<br /><br />kernel/trace/KConfig | =Y                                      |



[Back to Home](../index.md)
